import{S as L,U as D,F as G,V as K,f as y,t as J,G as U,i as X,I as Y,a as Q,E as Z,W as ee,X as ne,w as te,Y as re}from"./index.21e49fa2.js";function oe(e,...r){if(Array.isArray(e))e.forEach(u=>oe(u,...r));else return e(...r)}function W(e){return e.some(r=>L(r)?!(r.type===D||r.type===G&&!W(r.children)):!0)?e:null}function he(e,r){return e&&W(e())||r()}function we(e,r,u){return e&&W(e(r))||u(r)}function ge(e,r){const u=e&&W(e());return r(u||null)}function be(e){return!(e&&W(e()))}function ue(e,r){if(e===void 0)return!1;if(r){const{context:{ids:u}}=r;return u.has(e)}return K(e)!==null}function ve(e){const r=y(e),u=J(r.value);return U(r,i=>{u.value=i}),typeof e=="function"?u:{__v_isRef:!0,get value(){return u.value},set value(i){e.set(i)}}}const se={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function ie(e,r,u){if(e==="mousemoveoutside"){const i=t=>{r.contains(t.target)||u(t)};return{mousemove:i,touchstart:i}}else if(e==="clickoutside"){let i=!1;const t=d=>{i=!r.contains(d.target)},s=d=>{!i||r.contains(d.target)||u(d)};return{mousedown:t,mouseup:s,touchstart:t,touchend:s}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function $(e,r,u){const i=se[e];let t=i.get(r);t===void 0&&i.set(r,t=new WeakMap);let s=t.get(u);return s===void 0&&t.set(u,s=ie(e,r,u)),s}function ae(e,r,u,i){if(e==="mousemoveoutside"||e==="clickoutside"){const t=$(e,r,u);return Object.keys(t).forEach(s=>{ce(s,document,t[s],i)}),!0}return!1}function de(e,r,u,i){if(e==="mousemoveoutside"||e==="clickoutside"){const t=$(e,r,u);return Object.keys(t).forEach(s=>{le(s,document,t[s],i)}),!0}return!1}function fe(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,r=new WeakMap;function u(){e.set(this,!0)}function i(){e.set(this,!0),r.set(this,!0)}function t(o,n,a){const f=o[n];return o[n]=function(){return a.apply(o,arguments),f.apply(o,arguments)},o}function s(o,n){o[n]=Event.prototype[n]}const d=new WeakMap,m=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var o;return(o=d.get(this))!==null&&o!==void 0?o:null}function P(o,n){m!==void 0&&Object.defineProperty(o,"currentTarget",{configurable:!0,enumerable:!0,get:n!=null?n:m.get})}const S={bubble:{},capture:{}},H={};function A(){const o=function(n){const{type:a,eventPhase:f,target:c,bubbles:w}=n;if(f===2)return;const g=f===1?"capture":"bubble";let p=c;const h=[];for(;p===null&&(p=window),h.push(p),p!==window;)p=p.parentNode||null;const b=S.capture[a],E=S.bubble[a];if(t(n,"stopPropagation",u),t(n,"stopImmediatePropagation",i),P(n,l),g==="capture"){if(b===void 0)return;for(let v=h.length-1;v>=0&&!e.has(n);--v){const T=h[v],j=b.get(T);if(j!==void 0){d.set(n,T);for(const k of j){if(r.has(n))break;k(n)}}if(v===0&&!w&&E!==void 0){const k=E.get(T);if(k!==void 0)for(const B of k){if(r.has(n))break;B(n)}}}}else if(g==="bubble"){if(E===void 0)return;for(let v=0;v<h.length&&!e.has(n);++v){const T=h[v],j=E.get(T);if(j!==void 0){d.set(n,T);for(const k of j){if(r.has(n))break;k(n)}}}}s(n,"stopPropagation"),s(n,"stopImmediatePropagation"),P(n)};return o.displayName="evtdUnifiedHandler",o}function N(){const o=function(n){const{type:a,eventPhase:f}=n;if(f!==2)return;const c=H[a];c!==void 0&&c.forEach(w=>w(n))};return o.displayName="evtdUnifiedWindowEventHandler",o}const R=A(),I=N();function M(o,n){const a=S[o];return a[n]===void 0&&(a[n]=new Map,window.addEventListener(n,R,o==="capture")),a[n]}function V(o){return H[o]===void 0&&(H[o]=new Set,window.addEventListener(o,I)),H[o]}function C(o,n){let a=o.get(n);return a===void 0&&o.set(n,a=new Set),a}function q(o,n,a,f){const c=S[n][a];if(c!==void 0){const w=c.get(o);if(w!==void 0&&w.has(f))return!0}return!1}function O(o,n){const a=H[o];return!!(a!==void 0&&a.has(n))}function z(o,n,a,f){let c;if(typeof f=="object"&&f.once===!0?c=b=>{F(o,n,c,f),a(b)}:c=a,ae(o,n,c,f))return;const g=f===!0||typeof f=="object"&&f.capture===!0?"capture":"bubble",p=M(g,o),h=C(p,n);if(h.has(c)||h.add(c),n===window){const b=V(o);b.has(c)||b.add(c)}}function F(o,n,a,f){if(de(o,n,a,f))return;const w=f===!0||typeof f=="object"&&f.capture===!0,g=w?"capture":"bubble",p=M(g,o),h=C(p,n);if(n===window&&!q(n,w?"bubble":"capture",o,a)&&O(o,a)){const E=H[o];E.delete(a),E.size===0&&(window.removeEventListener(o,I),H[o]=void 0)}h.has(a)&&h.delete(a),h.size===0&&p.delete(n),p.size===0&&(window.removeEventListener(o,R,g==="capture"),S[g][o]=void 0)}return{on:z,off:F}}const{on:ce,off:le}=fe();function He(e,r){return U(e,u=>{u!==void 0&&(r.value=u)}),y(()=>e.value===void 0?r.value:e.value)}const _=Z("n-form-item");function Ee(e,{defaultSize:r="medium",mergedSize:u,mergedDisabled:i}={}){const t=X(_,null);Y(_,null);const s=y(u?()=>u(t):()=>{const{size:l}=e;if(l)return l;if(t){const{mergedSize:P}=t;if(P.value!==void 0)return P.value}return r}),d=y(i?()=>i(t):()=>{const{disabled:l}=e;return l!==void 0?l:t?t.disabled.value:!1}),m=y(()=>{const{status:l}=e;return l||(t==null?void 0:t.mergedValidationStatus.value)});return Q(()=>{t&&t.restoreValidation()}),{mergedSizeRef:s,mergedDisabledRef:d,mergedStatusRef:m,nTriggerFormBlur(){t&&t.handleContentBlur()},nTriggerFormChange(){t&&t.handleContentChange()},nTriggerFormFocus(){t&&t.handleContentFocus()},nTriggerFormInput(){t&&t.handleContentInput()}}}function Te(e,r,u){if(!r)return;const i=ee(),t=y(()=>{const{value:d}=r;if(!d)return;const m=d[e];if(!!m)return m}),s=()=>{te(()=>{const{value:d}=u,m=`${d}${e}Rtl`;if(ue(m,i))return;const{value:l}=t;!l||l.style.mount({id:m,head:!0,anchorMetaName:re,props:{bPrefix:d?`.${d}-`:void 0},ssr:i})})};return i?s():ne(s),t}const me="http://106.55.8.54:19999/";function ke(e){let r=new Headers;r.append("Content-Type","application/json;*/*");let u={method:"GET",headers:r,mode:"cors",cache:"default"},i=new Request(x(e));return fetch(i,u).then(t=>(t.ok||(window.$message.error("bad service."),new Promise((s,d)=>{})),t.json())).then(t=>new Promise((s,d)=>{if(t&&t.code===200){s(t);return}window.$message.error(t.msg||"unknown err."),d(t)}))}function ye(e,r){let u=new Headers;u.append("Content-Type","application/json; charset=utf-8;");let i={method:"POST",headers:u,mode:"cors",cache:"default"};r&&(i.body=JSON.stringify(r));let t=new Request(x(e));return fetch(t,i).then(s=>s.ok?s.json():(window.$message.error("bad service."),new Promise((d,m)=>{}))).then(s=>new Promise((d,m)=>{if(s&&s.code===200){d(s);return}window.$message.error(s.msg||"unknown err.")}))}function x(e){return e=String(e),e.includes("http")?e:(e.startsWith("/")&&(e=e.substring(1)),me+e)}export{ce as a,we as b,He as c,Ee as d,ve as e,ge as f,oe as g,ye as h,be as i,ke as j,le as o,he as r,Te as u};
